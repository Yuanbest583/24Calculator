# 24点计算器 - README

## 项目简介

这是一个高度优化的24点游戏计算器，使用纯HTML、CSS和JavaScript实现。用户输入四个1-13之间的数字后，程序会智能枚举所有可能的运算组合，找出能够通过加、减、乘、除运算得到24的表达式，并自动去除所有数学等价重复解。

## 核心优化特性

✅ **完全去除重复解**  
- 处理交换律导致的重复（如3+4+5与5+4+3）
- 处理结合律导致的重复（如(1+2)+3与1+(2+3)）
- 处理混合运算等价情况（如3+5-2与3-2+5）

✅ **智能表达式简化**  
- 自动去除不必要的括号
- 保持数学表达式的自然形式
- 标准化表达式显示格式

✅ **性能优化**  
- 高效的数据结构存储
- 快速重复检测算法
- 计算耗时统计显示

## 使用说明

1. **输入数字**：在四个输入框中分别输入1-13之间的整数
2. **开始计算**：点击"计算"按钮或按Enter键
3. **查看结果**：
   - 所有唯一解会清晰列出
   - 无解时显示提示信息
   - 底部显示找到的解数量和计算耗时

## 技术实现细节

### 核心算法

1. **排列生成**：递归生成所有数字排列组合
2. **运算符组合**：遍历四种基本运算的所有可能
3. **括号组合**：考虑五种运算优先级组合
4. **规范化处理**：
   - 语法树解析
   - 表达式标准化
   - 等价性检测

### 关键函数

- `solve24(numbers)`：主计算逻辑
- `canonicalizeTree(node)`：表达式规范化核心
- `normalizeExpression(expr)`：表达式简化
- `getCanonicalKey(expr)`：生成唯一标识

## 文件结构

```
24-point-calculator-optimized/
├── index.html          # 主页面HTML结构
├── (内嵌CSS样式)        # 响应式界面设计
└── (内嵌JavaScript)     # 核心计算逻辑与优化算法
```

## 示例演示

**输入**：  
数字：3, 4, 5, 6

**输出**：
```
((3-4+5))*6 = 24
((3+5-4))*6 = 24
((3+(5-4)))*6 = 24
共找到 3 个唯一解，耗时 107.50 毫秒
```

## 高级特性

1. **智能括号处理**：
   - 自动判断括号必要性
   - 保持运算优先级

2. **特殊等价情况处理**：
   - 识别 a-(b-c) ≡ (a-b)+c
   - 识别 a/(b/c) ≡ (a×c)/b

3. **性能监控**：
   - 实时计算耗时统计
   - 高效内存管理

## 扩展建议

1. 添加难度选择（限制运算符种类）
2. 实现分步解题演示
3. 增加游戏计时模式
4. 添加用户历史记录
